@page "/placeholder"
@using Contracts
@using Microsoft.AspNetCore.Authorization
@inject PlaceholderPublisher PlaceholderPublisher
@attribute [Authorize(Policy = "AdminOnly")]
<h3>Placeholder Response</h3>

@if (responseMessage == null)
{
    <p>Loading...</p>
}
else
{
    <p>@responseMessage.Response</p>
}

@code {
    private PlaceholderResponse? responseMessage;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            responseMessage = await PlaceholderPublisher.GetMyResponse("test message");
            StateHasChanged(); 
        }
    }
}
